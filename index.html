<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manga Maker V9 - Web Edition</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <script type="importmap">
    {
      "imports": {
        "@google/generative-ai": "https://esm.run/@google/generative-ai",
        "jszip": "https://esm.run/jszip"
      }
    }
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Manga Maker V9</h1>
            <p>AI-Powered Manga Pipeline (Google AI Studio)</p>
        </header>

        <main>
            <section class="config-section">
                <h2>Configuration</h2>
                <div class="input-group">
                    <label for="google-key">Google AI Studio API Key:</label>
                    <input type="password" id="google-key" placeholder="AIzaSy..." required>
                </div>
                <p class="hint">Uses Gemini 2.5 Pro (Architect), 2.5 Flash Image (Artist), 2.5 Flash (Editor).</p>
            </section>

            <section class="context-section">
                <h2>Story Context</h2>
                <div class="input-group">
                    <label for="chapter-num">Current Chapter Number:</label>
                    <input type="number" id="chapter-num" value="1" min="1">
                </div>
                <div class="input-group">
                    <label for="context-file">Load Context File (.json):</label>
                    <input type="file" id="context-file" accept=".json">
                </div>
                <!-- Context download is now handled via ZIP at the end -->
            </section>

            <section class="input-section">
                <h2>Story Input</h2>
                <div class="input-group">
                    <label for="scene-text">Chapter Content:</label>
                    <textarea id="scene-text" rows="10" placeholder="Paste the full chapter text here. The Architect will split it into pages."></textarea>
                </div>
                <button id="generate-btn" class="primary-btn">Generate Chapter (ZIP)</button>
            </section>

            <section class="status-section">
                <h3>Status</h3>
                <div id="status-log" class="log-box">Ready.</div>
                <div id="progress-bar-container" style="display:none; width: 100%; background: #ccc; height: 20px; margin-top: 10px;">
                    <div id="progress-bar" style="width: 0%; background: #4caf50; height: 100%;"></div>
                </div>
            </section>

            <section class="preview-section">
                <h2>Live Preview</h2>
                <div id="pages-container">
                    <!-- HTML Pages will be appended here -->
                </div>
            </section>
        </main>

        <footer>
            <p>Manga Maker V9 - Web Edition</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
